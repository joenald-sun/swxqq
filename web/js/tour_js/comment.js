!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e['default']}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t['default']=e,t}(n(6)),o=function(e){return e&&e.__esModule?e:{default:e}}(n(11));var a="UNINITED",s="UNLOADED",c="UNMOUNTED",u="UNRENDERED",l=window.$,d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=null,e.initState=a,e.loadState=s,e.mountState=c,e.renderState=u,e.$el=l("<div />"),e.ejs=r,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["default"]),i(t,[{key:"setInitedState",value:function(){this.initState="INITED"}},{key:"setLoadedState",value:function(){this.loadState="LOADED"}},{key:"setMountedState",value:function(){this.mountState="MOUNTED"}},{key:"setUnmountedState",value:function(){this.mountState=c}},{key:"setRenderedState",value:function(){this.renderState="RENDERED"}},{key:"setUnrenderedState",value:function(){this.renderState=u}},{key:"updateRenderState",value:function(){"INITED"===this.initState&&"LOADED"===this.loadState&&"MOUNTED"===this.mountState?this.setRenderedState():this.setUnrenderedState()}},{key:"isInited",value:function(){return"INITED"===this.initState}},{key:"isLoaded",value:function(){return"LOADED"===this.loadState}},{key:"isMounted",value:function(){return"MOUNTED"===this.mountState}},{key:"isRendered",value:function(){return"RENDERED"===this.renderState}},{key:"init",value:function(){return!this.isInited()&&(this.setInitedState(),!0)}},{key:"load",value:function(e){this.data=e,this.setLoadedState(),this.updateRenderState(),this.render()}},{key:"mount",value:function(e){if(!this.isMounted()){var t=!1;return l.isFunction(e)?t=e(this.$el):e instanceof l&&(e.append(this.$el),t=!0),!0===t&&(this.setMountedState(),this.updateRenderState(),this.render()),!!t}}},{key:"unmount",value:function(e){this.isMounted()&&(this.$el.detach(),e||this.$el.empty(),this.setUnmountedState(),this.updateRenderState())}},{key:"render",value:function(){return this.isRendered()}},{key:"$",value:function(e){return this.$el?this.$el.find(e):null}},{key:"destroy",value:function(){this.data=null,this.$el&&(this.$el.remove(),this.$el=null)}},{key:"show",value:function(){this.$el&&this.$el.show()}},{key:"hide",value:function(){this.$el&&this.$el.hide()}}]),t}();t['default']=d},function(e,t,n){"use strict";var i;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=t.CATEGORY_PRODUCT="CATEGORY_PRODUCT",a=t.CATEGORY_HOTEL="CATEGORY_HOTEL",s=t.CATEGORY_VIEWPORT="CATEGORY_VIEWPORT";t.DEFAULT_CATEGORY=o,t.URL_CREATE_COMMENT="https://i.tuniu.com/list",t.URL_PRODUCT_COMMENT="/papi/tour/comment/product",t.URL_RESOURCE_COMMENT="/papi/tour/comment/resource",t.ERROR_FETCH_ABORT="ERROR_FETCH_ABORT",t.ERROR_DATA_EMPTY="ERROR_DATA_EMPTY",t.CATEGORY_MAP=(r(i={},o,0),r(i,a,1),r(i,s,2),i)},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(3));var r=null,o={init:function(e){r||((r=(0,i['default'])({el:e.el,productId:e.productId||210000261,tab:e.tab||{product:!1},type:e.type||!1})).init(),r.load())}};window.commentModule=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t['default']=function(e){return new R(e)},n(4);var a=g(n(5)),s=g(n(0)),c=g(n(12)),u=g(n(16)),l=g(n(19)),d=g(n(24)),f=g(n(27)),p=g(n(30)),h=g(n(32)),m=g(n(33)),v=g(n(34)),y=n(1);function g(e){return e&&e.__esModule?e:{default:e}}var _=window.$,b=_(window);function O(e){return new Promise(function(t,n){_.ajax(e,{dataType:"json",success:function(e){t(e)},error:function(e){n(e)}})})}function w(e,t){var n=void 0,i=void 0;return t?n=(e.selectedTypeList||[]).filter(function(e){return e}):(e.summary.remarkAmount>0&&(n=(e.selectTypeList||[]).filter(function(e){return e})),Array.isArray(e.resourceList)&&(i=e.resourceList.filter(function(e){return e}))),n&&n.length||i&&i.length?{tag:n,resource:i}:null}function E(e,t){return{current:e.currentPage,total:t?e.pageNum:e.pageNums}}function T(e,t,n){return e?t?e.list:n&&e.remarkList&&e.remarkList.length?(e.remarkList.forEach(function(e){e.type=y.CATEGORY_MAP[n]}),e.remarkList):null:null}function k(e,t){var n=!0;return e&&"object"===(void 0===e?"undefined":o(e))&&(n=t?!(Array.isArray(e.list)&&e.list.length>0):!(Array.isArray(e.remarkList)&&e.remarkList.length>0||e.resourceList&&e.resourceList.length>0)),n}var R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type||(e.type=y.CATEGORY_PRODUCT),n.selectedType=e.type,n.selectedTagId=0,n.selectedResourceId=0,n.selectedPage=void 0,n.productId=e.productId,n.endabled=!!n.productId,n.$el=_(e.el),n.tabData=e.tab,h['default']?n.$el.addClass("flex-supported"):n.$el.addClass("flex-not-supported"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"]),i(t,[{key:"init",value:function(){var e=this;this.endabled&&(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.tab=(0,c['default'])(),this.summary=(0,f['default'])(),this.tag=(0,u['default'])(),this.list=(0,l['default'])(),this.pagination=(0,d['default'])(),this.contentError=(0,p['default'])(),this.tab.init(),this.summary.init(),this.tag.init(),this.list.init(),this.pagination.init(),this.contentError.init(),this.tab.on("change",function(t,n){e.selectedType!==t&&(e.selectedType=t,e.selectedTagId=0,e.selectedResourceId=0,e.selectedPage=void 0,e.tab.update(t,n),e.tag.changeMoreVisible(t!==y.CATEGORY_PRODUCT),e.fetchInitData(),e.list.empty(),b.trigger("resize"))}),this.tag.on("change",function(t){e.selectedTagId!==t&&(e.selectedTagId=t,e.selectedPage=void 0,e.tag.update(t),e.list.empty(),console.log(666),e.fetchDataByTag(),b.trigger("resize"))}),this.tag.on("changeresource",function(t){e.selectedResourceId!==t&&(e.selectedTagId=0,e.selectedResourceId=t,e.selectedPage=void 0,e.tag.updateResource(t),e.list.empty(),e.fetchDataByTag(),b.trigger("resize"))}),this.pagination.on("change",function(t){e.selectedPage!==t&&(_("html,body").animate({scrollTop:e.tag.$el.offset().top-45},10),e.selectedPage=t,e.fetchDataByPagination())}),this.initFrameView(),this.$body=this.$(".J_commentBody"),this.tab.load(this.tabData),this.tab.mount(this.$body),this.tag.changeMoreVisible(this.selectedType!==y.CATEGORY_PRODUCT))}},{key:"initFrameView",value:function(){this.$el.append(this.ejs.compile(a['default'])())}},{key:"getProductFlag",value:function(){return this.selectedType===y.CATEGORY_PRODUCT}},{key:"load",value:function(){this.endabled&&(this.hideInitLoading(),this.fetchInitData())}},{key:"fetchInitData",value:function(){var e=this;if(this.endabled)return this.summary.unmount(),this.tag.unmount(),this.list.unmount(),this.pagination.unmount(),this.contentError.unmount(),this.showLoading(),this._fetch().then(function(t){return e.loadInitData(t)})['catch'](function(t){t!==y.ERROR_FETCH_ABORT&&e.showInitError(t)})}},{key:"loadInitData",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e);var n=this.getProductFlag();this.summary.load(function(e){return Object.assign({},e.summary,{specSatisfactionList:e.specSatisfactionList||null,selectedTypeList:e.selectedTypeList,count:e.count})}(e)),this.tag.load(w(e,n),this.selectedType),this.list.load(T(e,n,this.selectedType)),(e.remarkList&&e.remarkList.length>0||e.list&&e.list.length>0)&&this.pagination.load(E(e,n)),this.hideLoading(),this.mount(e)}},{key:"mount",value:function(e){this.endabled&&(this.selectedType===y.CATEGORY_PRODUCT&&this.summary.mount(this.$body),this.tag.mount(this.$body,this.selectedType),this.list.mount(this.$body),(e.remarkList&&e.remarkList.length>0||e.list&&e.list.length)&&this.pagination.mount(this.$body))}},{key:"showInitError",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,null),this.hideLoading(),this.getProductFlag()?(this.showSummaryError(),this.showContentError("*本产品暂无点评信息，游客出游归来可发表点评，您的出游评价是我们提升服务的依据。",!0)):this.showContentError()}},{key:"showSummaryError",value:function(){this.summary.showError(),this.summary.mount(this.$body)}},{key:"fetchDataByTag",value:function(){var e=this;return this.contentError.unmount(),this.pagination.unmount(),this.showListLoading(),this._fetch().then(function(t){return e.loadDataByTag(t)})['catch'](function(t){t===y.ERROR_DATA_EMPTY?e.showContentError("暂无点评信息"):"object"===(void 0===t?"undefined":o(t))&&(e.showContentError("暂无点评信息"),e.tag.load(w(t,e.getProductFlag()),e.selectedType))})}},{key:"loadDataByTag",value:function(e){var n=this.getProductFlag();r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),this.hideListLoading(),this.tag.load(w(e,n),this.selectedType),this.list.load(T(e,n,this.selectedType)),this.pagination.load(E(e,n)),this.list.mount(this.$body),(e.remarkList&&e.remarkList.length||e.list&&e.list.length)&&this.pagination.mount(this.$body)}},{key:"showContentError",value:function(e,n){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,null),this.hideListLoading(),this.list.unmount(),this.contentError.setText(e,n),this.contentError.mount(this.$body)}},{key:"fetchDataByPagination",value:function(){var e=this;return this.showListLoading(),this._fetch().then(function(t){return e.loadDataByPagination(t)})}},{key:"loadDataByPagination",value:function(e){var n=this.getProductFlag();r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),this.list.load(T(e,n,this.selectedType)),this.pagination.load(E(e,n)),this.hideListLoading()}},{key:"_fetch",value:function(){return this.selectedType===y.CATEGORY_PRODUCT?this.fetchProductComment():this.fetchResourceComment()}},{key:"fetchProductComment",value:function(){var e=this,t=this._productUid=(0,v['default'])();return O((0,m['default'])({page:this.selectedPage,productId:this.productId,selectedType:this.selectedTagId},y.URL_PRODUCT_COMMENT)).then(function(n){return e._productUid===t?n:Promise.reject(y.ERROR_FETCH_ABORT)}).then(function(e){return e&&e.success&&e.data&&!k(e.data,!0)?e.data:Promise.reject(y.ERROR_DATA_EMPTY)})}},{key:"fetchResourceComment",value:function(){var e=this,t=this._resourceUid=(0,v['default'])();return O((0,m['default'])({productId:this.productId,page:this.selectedPage,selectType:this.selectedTagId,resourceId:this.selectedResourceId,tabType:y.CATEGORY_MAP[this.selectedType]},y.URL_RESOURCE_COMMENT)).then(function(n){return e._resourceUid===t?n:Promise.reject(y.ERROR_FETCH_ABORT)}).then(function(e){return e&&e.success&&e.data&&!k(e.data,!1)?e.data:e&&e.success&&e.data?Promise.reject(e.data):Promise.reject(y.ERROR_DATA_EMPTY)})}},{key:"hideInitLoading",value:function(){this.$(".J_commentFrame").removeClass("loading")}},{key:"showListLoading",value:function(){this.list.clear(),this.list.showLoading()}},{key:"hideListLoading",value:function(){this.list.hideLoading()}},{key:"getLoader",value:function(){return this.$loader||(this.$loader=_("<div />"),this.$loader.addClass("comment-loading")),this.$loader}},{key:"showLoading",value:function(){this.$body&&this.$body.append(this.getLoader())}},{key:"hideLoading",value:function(){this.$loader&&this.$loader.remove()}}]),t}()},function(e,t){},function(e,t){e.exports='<div class="J_commentFrame comment-frame loading">\n    <div class="comment-frame-head">\n        <div class="title">游客<br>点评</div>\n    </div>\n    <div class="J_commentBody comment-frame-body"></div>\n</div>'},function(e,t,n){"use strict";
/**
 * @file Embedded JavaScript templating engine.
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.__express=t.escapeXML=t.clearCache=t.renderFile=t.render=t.compile=t.resolveInclude=t.localsName=t.cache=void 0;var i=o(n(7)),r=o(n(9));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t['default']=e,t}var a={},s=!1,c=o(n(10)).version,u="%",l="locals",d=["cache","filename","delimiter","scope","context","debug","compileDebug","client","_with","root","rmWhitespace","strict","localsName"],f=/;\s*$/,p=/^\uFEFF/,h=t.cache=r.cache,m=t.localsName=l,v=t.resolveInclude=function(e,t,n){var r=i.dirname,o=i.extname,a=(0,i.resolve)(n?t:r(t),e);return o(e)||(a+=".ejs"),a};function y(e,t){var n;if("/"==e.charAt(0))n=v(e.replace(/^\/*/,""),t.root||"/",!0);else{if(!t.filename)throw new Error("`include` use relative path requires the 'filename' option.");n=v(e,t.filename)}return n}function g(e,t){var n,i=e.filename,r=arguments.length>1;if(e.cache){if(!i)throw new Error("cache option requires a filename");if(n=h.get(i))return n;r||(t=a.readFileSync(i).toString().replace(p,""))}else if(!r){if(!i)throw new Error("Internal EJS error: no file name or template provided");t=a.readFileSync(i).toString().replace(p,"")}return n=O(t,e),e.cache&&h.set(i,n),n}function _(e,t,n,i){var r=t.split("\n"),o=Math.max(i-3,0),a=Math.min(r.length,i+3),s=r.slice(o,a).map(function(e,t){var n=t+o+1;return(n==i?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=n,e.message=(n||"ejs")+":"+i+"\n"+s+"\n\n"+e.message,e}function b(e,t){d.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])})}var O=t.compile=function(e,t){return t&&t.scope&&(s||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),s=!0),t.context||(t.context=t.scope),delete t.scope),new E(e,t).compile()},w=(t.render=function(e,t,n){var i=t||{},r=n||{};return 2==arguments.length&&b(i,r),g(r,e)(i)},t.renderFile=function(){var e,t=Array.prototype.slice.call(arguments),n=t.shift(),i=t.pop(),o=t.shift()||{},a=t.pop()||{};a=r.shallowCopy({},a),3==arguments.length&&(o.settings&&o.settings["view options"]?b(o.settings["view options"],a):b(o,a)),a.filename=n;try{e=g(a)(o)}catch(e){return i(e)}return i(null,e)});t.clearCache=function(){h.reset()};function E(e,t){t=t||{};var n={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],n.client=t.client||!0,n.escapeFunction=t.escape||r.escapeXML,n.compileDebug=!1!==t.compileDebug,n.debug=!!t.debug,n.filename=t.filename,n.delimiter=t.delimiter||u,n.strict=t.strict||!1,n.context=t.context,n.cache=t.cache||!1,n.rmWhitespace=t.rmWhitespace,n.root=t.root,n.localsName=t.localsName||m||l,n.strict?n._with=!1:n._with=void 0===t._with||t._with,this.opts=n,this.regex=this.createRegex()}E.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},E.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",t=r.escapeRegExpChars(this.opts.delimiter);return e=e.replace(/%/g,t),new RegExp(e)},compile:function(){var e,t,n=this.opts,i="",o="",a=n.escapeFunction;this.source||(this.generateSource(),i+="  var __output = [], __append = __output.push.bind(__output);\n",!1!==n._with&&(i+="  with ("+n.localsName+" || {}) {\n",o+="  }\n"),o+='  return __output.join("");\n',this.source=i+this.source+o),e=n.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(n.filename?JSON.stringify(n.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line);\n}\n":this.source,n.debug&&console.log(e),n.client&&(e="escape = escape || "+a.toString()+";\n"+e,n.compileDebug&&(e="rethrow = rethrow || "+_.toString()+";\n"+e)),n.strict&&(e='"use strict";\n'+e);try{t=new Function(n.localsName+", escape, include, rethrow",e)}catch(e){throw e instanceof SyntaxError&&(n.filename&&(e.message+=" in "+n.filename),e.message+=" while compiling ejs"),e}if(n.client)return t.dependencies=this.dependencies,function(){return t.apply(n.context,Array.from(arguments))};var s=function(e){return t.apply(n.context,[e||{},a,function(t,i){var o=r.shallowCopy({},e);return i&&(o=r.shallowCopy(o,i)),function(e,t){var n=r.shallowCopy({},t);return n.filename=y(e,n),g(n)}(t,n)(o)},_])};return s.dependencies=this.dependencies,s},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var e=this,t=this.parseTemplateText(),n=this.opts.delimiter;t&&t.length&&t.forEach(function(i,o){var s,c,u,l,d,f;if(0===i.indexOf("<"+n)&&0!==i.indexOf("<"+n+n)&&(c=t[o+2])!=n+">"&&c!="-"+n+">"&&c!="_"+n+">")throw new Error('Could not find matching close tag for "'+i+'".');if((u=i.match(/^\s*include\s+(\S+)/))&&(s=t[o-1])&&(s=="<"+n||s=="<"+n+"-"||s=="<"+n+"_"))return l=r.shallowCopy({},e.opts),d=function(e,t){var n,i,o=r.shallowCopy({},t);n=y(e,o),i=a.readFileSync(n).toString().replace(p,""),o.filename=n;var s=new E(i,o);return s.generateSource(),{source:s.source,filename:n,template:i}}(u[1],l),f=e.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(d.template)+"\n      , __filename = "+JSON.stringify(d.filename)+";\n      try {\n"+d.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+d.source+"    ; }).call(this)\n",e.source+=f,void e.dependencies.push(v(u[1],l.filename));e.scanLine(i)})},parseTemplateText:function(){for(var e,t=this.templateText,n=this.regex,i=n.exec(t),r=[];i;)0!==(e=i.index)&&(r.push(t.substring(0,e)),t=t.slice(e)),r.push(i[0]),t=t.slice(i[0].length),i=n.exec(t);return t&&r.push(t),r},scanLine:function(e){var t,n=this,i=this.opts.delimiter;function r(){n.truncate?(e=e.replace(/^(?:\r\n|\r|\n)/,""),n.truncate=!1):n.opts.rmWhitespace&&(e=e.replace(/^\n/,"")),e&&(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),n.source+='    ; __append("'+e+'")\n')}switch(t=e.split("\n").length-1,e){case"<"+i:case"<"+i+"_":this.mode=E.modes.EVAL;break;case"<"+i+"=":this.mode=E.modes.ESCAPED;break;case"<"+i+"-":this.mode=E.modes.RAW;break;case"<"+i+"#":this.mode=E.modes.COMMENT;break;case"<"+i+i:this.mode=E.modes.LITERAL,this.source+='    ; __append("'+e.replace("<"+i+i,"<"+i)+'")\n';break;case i+i+">":this.mode=E.modes.LITERAL,this.source+='    ; __append("'+e.replace(i+i+">",i+">")+'")\n';break;case i+">":case"-"+i+">":case"_"+i+">":this.mode==E.modes.LITERAL&&r(),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case E.modes.EVAL:case E.modes.ESCAPED:case E.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case E.modes.EVAL:this.source+="    ; "+e+"\n";break;case E.modes.ESCAPED:this.source+="    ; __append(escape("+e.replace(f,"").trim()+"))\n";break;case E.modes.RAW:this.source+="    ; __append("+e.replace(f,"").trim()+")\n";break;case E.modes.COMMENT:break;case E.modes.LITERAL:r()}}else r()}n.opts.compileDebug&&t&&(this.currentLine+=t,this.source+="    ; __line = "+this.currentLine+"\n")}};t.escapeXML=r.escapeXML,t.__express=w,t.VERSION=c},function(e,t,n){"use strict";var i=n(8);function r(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return o.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}t.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:i.process.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o.charAt(0))}return e=r(s(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},t.normalize=function(e){var n=t.isAbsolute(e),i="/"===c(e,-1);return(e=r(s(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&i&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=i(e.split("/")),o=i(n.split("/")),a=Math.min(r.length,o.length),s=a,c=0;c<a;c++)if(r[c]!==o[c]){s=c;break}var u=[];for(c=s;c<r.length;c++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=a(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},t.basename=function(e,t){var n=a(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return a(e)[3]};var c="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}},function(e,t,n){"use strict";var i=e.exports={},r=[],o=!1;function a(){if(!o){var e;o=!0;for(var t=r.length;t;){e=r,r=[];for(var n=-1;++n<t;)e[n]();t=r.length}o=!1}}function s(){}i.nextTick=function(e){r.push(e),o||setTimeout(a,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=s,i.addListener=s,i.once=s,i.off=s,i.removeListener=s,i.removeAllListeners=s,i.emit=s,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var i=/[|\\{}()[\]^$+*?.]/g;t.escapeRegExpChars=function(e){return e?String(e).replace(i,"\\$&"):""};t.escapeXML=new Function("markup","\n    return markup == undefined\n    ? ''\n    : String(markup).replace(_MATCH_HTML, encode_char);\n"),t.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},t.shallowCopy=function(e,t){for(var n in t=t||{})e[n]=t[n];return e},t.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},reset:function(){this._data={}}}},function(e,t,n){"use strict";e.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.2",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2",rimraf:"^2.2.8","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"mocha",coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"rimraf out && jsdoc -c jsdoc.json lib/* docs/jsdoc/*",devdoc:"rimraf out && jsdoc -p -c jsdoc.json lib/* docs/jsdoc/*"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}return i(e,[{key:"on",value:function(e){var t=void 0;(t=this._events[e])||(t=this._events[e]=[]);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.filter(function(e){return function(e){return"function"==typeof e}(e)}).forEach(function(e){return t.push(e)})}},{key:"dispatch",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this._events[e];Array.isArray(o)&&o.forEach(function(e){e.apply(t,i)})}}]),e}();t['default']=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};t['default']=function(){return new f},n(13);var o=u(n(14)),a=u(n(0)),s=u(n(15)),c=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var l=window.$,d=[c.CATEGORY_PRODUCT,c.CATEGORY_HOTEL,c.CATEGORY_VIEWPORT],f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),i(t,[{key:"init",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.$el.addClass("comment-tab"),this.$el.on("click",".J_tabItem",function(){var t=l(this).index(),n=d[t];n&&e.dispatch("change",n)})}},{key:"load",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),d=[],e.product&&d.push("CATEGORY_PRODUCT"),e.hotel&&d.push("CATEGORY_HOTEL"),e.scenic&&d.push("CATEGORY_VIEWPORT")}},{key:"render",value:function(){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isRendered",this).call(this)){var e=this.ejs.compile(o['default'])({data:this.data});this.data.scenic||this.data.product||this.data.hotel||this.$el.removeClass("comment-tab"),this.$el.append(e)}}},{key:"update",value:function(e){var t=d.indexOf(e);-1!==t&&(this.$(".J_tabItem").removeClass("active").eq(t).addClass("active"),this.updateBar())}},{key:"updateBar",value:function(){if(this.isRendered()){var e=this.$(".J_tabBar"),t=this.$(".J_tabItem.active"),n=this.$el.offset(),i=t.offset();n&&i&&(s['default']?e.css({left:i.left-n.left}):e.animate({left:i.left-n.left},200))}}}]),t}()},function(e,t){},function(e,t){e.exports='<ul>\n    <% if (data.product) { %>\n        <li class="J_tabItem">产品点评</li>\n    <% } %>\n    <% if (data.hotel) { %>\n        <li class="J_tabItem" data-item=1>酒店点评</li>\n    <% } %>\n    <% if (data.scenic) { %>\n        <li class="J_tabItem" data-item=2>景点点评</li>\n    <% } %>\n</ul>\n<% if (data.scenic || data.product || data.hotel) { %>\n<i class="J_tabBar bar"></i>\n<% } %>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["transition","wekitTransition","mozTransition"],r="all";t['default']=function(){var e=document.createElement("div");return i.forEach(function(t){e.style[t]=r}),i.some(function(t){return!!e.style[t]})}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};t['default']=function(){return new l},n(17);var o=c(n(18)),a=c(n(0)),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var u=window.$,l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),i(t,[{key:"init",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.overflowed=!1,this.expanded=!0,this.moreVisible=!1,this.$el.addClass("comment-tag"),this.$el.on("click",".J_tagItem",function(){e.dispatch("change",u(this).data("id"))}).on("click",".J_tagResourceItem",function(){e.dispatch("changeresource",u(this).data("id"))}).on("click",".J_tagResourceMore",function(){e.toggleResource()})}},{key:"load",value:function(e,n){e&&(this.selectedType=n,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e))}},{key:"changeMoreVisible",value:function(e){this.moreVisible=!0===e}},{key:"render",value:function(){this.isRendered()&&this._render()}},{key:"_render",value:function(){var e=this.ejs.compile(o['default'])({data:this.data,moreText:this.getMoreExpandText()});if(this.$el.html(e),this.moreVisible){var t=this.$(".J_tagRresourceList"),n=this.$(".J_tagRresourceBox"),i=this.$(".J_tagResourceMore");t.height()>n.height()&&(this.overflowed=!0,this.expanded=!1,this.$(".J_tagRresourceGroup").removeClass("init").addClass("fold overflow"),this.$(".J_tagResourceMoreShadow").width(i.outerWidth()))}}},{key:"selectTag",value:function(e){this.data&&(this.data.tag||[]).forEach(function(t){t.selectedType===e?t.isSelected=!0:t.isSelected=!1})}},{key:"selectResource",value:function(e){this.data&&(this.data.resource||[]).forEach(function(t){t.resourceId===e?t.isSelected=!0:t.isSelected=!1})}},{key:"update",value:function(e){this.selectTag(e),this._render()}},{key:"updateResource",value:function(e){this.selectResource(e),this._render()}},{key:"toggleResource",value:function(){if(this.overflowed){var e=this.$(".J_tagRresourceGroup");this.expanded?(this.expanded=!1,this.$(".J_tagResourceMoreText").text(this.getMoreExpandText()),e.addClass("fold")):(this.expanded=!0,this.$(".J_tagResourceMoreText").text("收起"),e.removeClass("fold"))}}},{key:"getMoreExpandText",value:function(){return this.selectedType===s.CATEGORY_HOTEL?"更多酒店":"更多景点"}}]),t}()},function(e,t){},function(e,t){e.exports='<% if (data.resource && data.resource.length) { %>\n    <div class="J_tagRresourceGroup tag-group tag-resource init">\n        <div class="J_tagResourceMore more"><span class="J_tagResourceMoreText"><%= moreText %></span> <i class="icon"></i></div>\n        <div class="J_tagRresourceBox box">\n            <div class="J_tagRresourceList list">\n                <div class="J_tagResourceMoreShadow more-shadow"></div>\n                <% data.resource.forEach(function(resource) { %>\n                    <% if (resource.isSelected) { %>\n                        <div class="J_tagResourceItem item active" data-id="<%= resource.resourceId %>">\n                            <%= resource.resourceName %><strong>（<%= resource.resourceSatisfaction %>%满意）</strong>\n                        </div>\n                    <% } %>\n                <% }) %>\n                <% data.resource.forEach(function(resource) { %>\n                    <% if (!resource.isSelected) { %>\n                        <div class="J_tagResourceItem item" data-id="<%= resource.resourceId %>">\n                            <%= resource.resourceName %><strong>（<%= resource.resourceSatisfaction %>%满意）</strong>\n                        </div>\n                    <% } %>\n                <% }) %>\n            </div>\n        </div>\n    </div>\n<% } %>\n<% if (data.tag && data.tag.length) { %>\n    <div class="tag-group">\n        <div class="box">\n            <div class="J_tagList list">\n                <% data.tag.forEach(function(tag) { %>\n                    <% if (tag.selectedType == 16) { %>\n                        <div class="J_tagItem item<%= tag.isSelected ? \' active\' : \'\' %>" data-id="<%= tag.selectedType %>"><%= tag.selectedName %></div>\n                    <% } else { %>\n                        <div class="J_tagItem item<%= tag.isSelected ? \' active\' : \'\' %>" data-id="<%= tag.selectedType %>"><%= tag.selectedName %><%= \'(\' + tag.selectedAmount + \')\'%></div>\n                    <% } %>\n                <% }) %>\n            </div>\n        </div>\n    </div>\n<% } %>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};t['default']=function(){return new u};var o=s(n(0)),a=s(n(20));function s(e){return e&&e.__esModule?e:{default:e}}var c=window.$,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["default"]),i(t,[{key:"init",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.children=[],this.$el.addClass("comment-list")}},{key:"load",value:function(e){var n=this;if(this.clear(),this.$el.html(""),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),!this.data||!this.data.length)return this.$el.html('<div class="listerror">暂无点评信息</div>'),!1;this.data.forEach(function(e){return n.addChild(e)})}},{key:"addChild",value:function(e){var t=(0,a['default'])();t.init(),t.load(e),t.mount(this.$el),this.children.push(t)}},{key:"clear",value:function(){this.children.forEach(function(e){return e.destroy()})}},{key:"empty",value:function(){this.$el.html("")}},{key:"getLoader",value:function(){return this.$loader||(this.$loader=c("<div />"),this.$loader.addClass("comment-loading")),this.$loader}},{key:"showLoading",value:function(){this.$el&&this.$el.addClass("loading").append(this.getLoader())}},{key:"hideLoading",value:function(){this.$loader&&(this.$el.removeClass("loading"),this.$loader.remove())}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};t['default']=function(){return new d},n(21);var o=n(22),a=c(n(0)),s=c(n(23));function c(e){return e&&e.__esModule?e:{default:e}}var u=window.$,l=window.openImageViewer||function(){};var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),i(t,[{key:"init",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.$el.addClass("comment-card")}},{key:"load",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),this.bind()}},{key:"bind",value:function(){}},{key:"render",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isRendered",this).call(this)&&(this.$el.append(this.ejs.compile(s['default'])({data:this.data,resizeImage:this.resizeImage,isResource:this.data.hasOwnProperty("remarkContent")})),this.$el.find(".comment-card-photos").each(function(){var t=u(this),n=t.find("img"),i=n.map(function(){return{src:this.src,name:""}}).toArray();n.each(function(e){u(this).click(function(){l(i,{index:e})})}),function(e,t){var n=e.length,i=0;function r(){++i===n&&t()}e&&e.length?e.forEach(function(e){var t=new Image;t.onload=function(){r(),t.onload=null,t.onerror=null,t=null},t.onerror=function(){r()},t.src=e.src}):t()}(n.toArray(),function(){(0,o.createGallery)(t,{callBack:function(){e.updateSize()}})})}))}},{key:"updateSize",value:function(){this.$el&&(this.$el.find(".comment-card-photos")||[]).each(function(){var e=u(this);e.find("[data-role=next]").hasClass("disabled")&&e.addClass("comment-card-photos-float")})}},{key:"resizeImage",value:function(e,t,n,i,r){var o=void 0;return t=t||0,n=n||0,i=i||0,r=r||0,(o=/^(.*?)(_w\d+_h\d+_c\d+_t\d+)*\.([\w]+)$/.exec(e))?[o[1],"_",["w"+t,"h"+n,"c"+i,"t"+r].join("_"),".",o[3]].join(""):e}},{key:"destroy",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}()},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=window.$,o=[],a=r(window);function s(e){for(var t in e=Object.assign({},e))e.hasOwnProperty(t)&&(e[t]=-e[t]);return e}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({direction:"h"},n),this.children=null,this.size=null,this.prevDisabled=!0,this.nextDisabled=!0,this.position={left:0,top:0},this.$container=t,this.$list=null,this.$prev=null,this.$next=null,this.init(),this.bind()}return i(e,[{key:"init",value:function(){this.$list=this.$container.find("[data-role=list]"),this.$prev=this.$container.find("[data-role=prev]"),this.$next=this.$container.find("[data-role=next]"),this.children=function(e,t){return e.find("[data-role=item]").toArray().map(function(e){return{$element:e=r(e)}})}(this.$list),this.updateSize(),this.updateState(),this.updateView(),this.options.callBack&&r.isFunction(this.options.callBack)&&this.options.callBack()}},{key:"update",value:function(){this.updateSize(),this.move(0)}},{key:"updateSize",value:function(){var e="h"===this.options.direction?"width":"height";!function(e){e.forEach(function(e){e.width=e.$element.outerWidth(!0),e.height=e.$element.outerHeight(!0)})}(this.children),this.size={width:this.$container.width(),height:this.$container.height()},this.$list[e](this.children.reduce(function(t,n){return n[e]+t},0)),this.listSize={width:this.$list.width(),height:this.$list.height()},this.listSize[e]<=this.size[e]?(this.$prev.hide(),this.$next.hide()):(this.$prev.show(),this.$next.show())}},{key:"updatePosition",value:function(e){var t=this.options.direction,n="h"===t?"left":"top",i="h"===t?"width":"height",r=0,o=this.position[n];e>0&&(o+=this.size[i]),this.children.some(function(t,n){var i=r+t.width;return 1===e&&o>=r&&o<i?(r=i,!0):-1===e&&o>r&&o<=i||(r=i,!1)}),e>0&&(r-=this.size[i]),this.listSize[i]-r<this.size[i]&&(r=this.listSize[i]-this.size[i]);var a={};a[n]=r,this.position=Object.assign({left:0,top:0},a)}},{key:"updateState",value:function(){var e=this.options.direction,t="h"===e?"left":"top",n="h"===e?"width":"height",i=this.position,r=this.size,o=this.listSize;i[t]<=0?this.prevDisabled=!0:this.prevDisabled=!1,i[t]+r[n]>=o[n]?this.nextDisabled=!0:this.nextDisabled=!1}},{key:"updateView",value:function(){this.prevDisabled?this.$prev.addClass("disabled"):this.$prev.removeClass("disabled"),this.nextDisabled?this.$next.addClass("disabled"):this.$next.removeClass("disabled")}},{key:"bind",value:function(){var e=this;this.$prev.click(function(){e.prevDisabled||e.move(-1)}),this.$next.click(function(){e.nextDisabled||e.move(1)})}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0===e?this.$list.css(s(this.position)):(this.updatePosition(e),this.updateState(),this.updateView(),this.$list.stop(!0,!0).animate(s(this.position),700))}}]),e}();a.on("resize",function(){o.forEach(function(e){return e.update()})}),t.createGallery=function(e,t){var n=new c(e,t);return o.push(n),n}},function(e,t){e.exports='<% if (data) { %>\n    <% if(data && data.length !== 0) { %>\n            <div class="comment-card-user">\n                <div class="comment-card-user-vatar">\n                    <img src="<%= resizeImage(data.userImage, 60, 60, 1) || \'http://img3.tuniucdn.com/img/20140811/usercenter_lxl/default.gif\' %>" alt="<%= data.realName || \'\' %>">\n                </div>\n                <% if(data.realName) { %>\n                    <div class="comment-card-user-name"><%= data.realName%></div>\n                <% } %>\n                <% if(isResource && data.userName) { %>\n                    <div class="comment-card-user-name"><%= data.userName%></div>\n                <% } %>\n                <% if(data.travelTypeName) { %>\n                    <div class="comment-card-user-type"><%= data.travelTypeName%></div>\n                <% } %>\n            </div>\n            <div class="comment-card-gift">\n                <% if(data.moneyAmount || data.couponAmount) { %>\n                    <h3 class="comment-card-gift-title"><ins class="icon"></ins>点评赠送</h3>\n                    <% if(data.moneyAmount) { %>\n                        <div class="comment-card-gift-item">返&nbsp;&nbsp;现<span>¥<%= data.moneyAmount%></span></div>\n                    <% } %>\n                    <% if(data.couponAmount) { %>\n                        <div class="comment-card-gift-item">抵用券<span>¥<%= data.couponAmount%></span></div>\n                    <% } %>\n                <% } %>\n            </div>\n            <div class="comment-card-content <%= isResource ? \'comment-card-resource\' : \'\'%>">\n                <div class="comment-card-product">\n                    <div class="comment-card-tags">\n                        <% if(data.compName && !data.type) { %>\n                            <span class="text-orange">总体评价：<%= data.compName %></span>\n                        <% } else if(data.compName && data.type) { %>\n                                <span class="text-orange"><%= data.type == 1 ? \'酒店评价：\': \'景点评价：\'%><%= data.compName %></span>\n                         <% } %>   \n                        <% if(data.subGradeContents && data.subGradeContents.length !== 0) { %>\n                            <% data.subGradeContents.forEach(function(subGradeContent,index) { %>\n                                <% if(subGradeContent.notes && subGradeContent.dataIvalue) { %>\n                                    <span><%= subGradeContent.notes%>: <%= subGradeContent.dataIvalue%></span>\n                                <% } %>\n                            <% }) %>\n                        <% } %>\n                        <% if (isResource) {%>\n                            <% if (data.remarkTime) {%>\n                                <span class="right">时间 ：<%= data.remarkTime%></span>\n                            <% } %>\n                            <% if (data.resourceName) {%>\n                                <span class="right"><%= data.resourceName%></span>\n                            <% } %>\n                        <% } %>   \n                    </div>\n                    <% if(data.content) { %>\n                        <div class="comment-card-text"><%= data.content%></div>\n                    <% } %>\n                    <% if(data.remarkContent) { %>\n                        <div class="comment-card-text"><%= data.remarkContent%></div>\n                    <% } %>\n                    <% if(data.subRemark && data.subRemark.length !== 0) { %>\n                        <% data.subRemark.forEach(function(subRemark,index) { %>\n                            <div class="comment-card-detail">\n                                <div class="comment-card-detail-title"><%= subRemark.category%>：</div>\n                                <div class="comment-card-detail-content"><%= subRemark.content%></div>\n                            </div> \n                        <% }) %>\n                    <% } %>\n                    <% if(data.images && data.images.length !== 0) { %>\n                        <div class="comment-card-photos">\n                            <div class="comment-item-picture-button comment-item-picture-prev" data-role="prev"><i class="icon"></i></div>\n                            <div class="comment-item-picture-button comment-item-picture-next" data-role="next"><i class="icon"></i></div>\n                            <% if(data.images && data.images.length !== 0) { %>\n                            <div class="comment-card-photos-box">\n                                <ul data-role="list">\n                                    <% data.images.forEach(function(image,index){ %>\n                                        <li data-role="item"><img src="<%= image.thumbUrl%>" alt=""></li>\n                                    <% }) %>\n                                </ul>\n                            </div>\n                            <% } %> \n                        </div>\n                    <% } %>\n                <% if(data.resourceContents && data.resourceContents.length !== 0) { %>\n                    <% data.resourceContents.forEach(function(resourceContent,index){ %>\n                        <div class="comment-card-resourceContent <%= index == 0 ? \'first\' : \'\'%>">\n                            <% if(resourceContent.resourceList && resourceContent.resourceList.length !== 0) { %>\n                                <% resourceContent.resourceList.forEach(function(resource,index){ %>\n                                    <div class="comment-card-resourceContent-header">\n                                        <% if(resourceContent.resourceTypeName) { %>\n                                            <i class= "<%= resourceContent.resourceTypeName == \'酒店点评\' ? \'hotel\' : \'scenic\'%>"></i>\n                                            <% if (resource.resourceName) {%>\n                                                <span class="resourceContent-name"><%= resource.resourceName%></span>\n                                            <% } %>\n                                             <% if (resource.feature) {%>\n                                                <span class="resourceContent-feature"><%= resource.feature%></span>\n                                            <% } %>\n                                            <% if (resource.compName) {%>\n                                                <span class="resourceContent-evaluation"><%= resource.compName%></span>\n                                            <% } %>\n                                        <% } %> \n                                    </div>\n                                    <div class="comment-card-text"><%= resource.content%></div>\n                                    <% if(resource.images && resource.images.length !== 0) { %>\n                                        <div class="comment-card-photos">\n                                            <div class="comment-item-picture-button comment-item-picture-prev" data-role="prev"><i class="icon"></i></div>\n                                            <div class="comment-item-picture-button comment-item-picture-next" data-role="next"><i class="icon"></i></div>\n                                            <% if(resource.images && resource.images.length !== 0) { %>\n                                                <div class="comment-card-photos-box">\n                                                    <ul data-role="list">\n                                                        <% resource.images.forEach(function(image,index){ %>\n                                                            <li data-role="item"><img src="<%= resizeImage(image, 120, 120, 1, 0) %>" alt=""></li>\n                                                        <% }) %>\n                                                    </ul>\n                                                </div>\n                                            <% } %>     \n                                        </div> \n                                    <% } %>     \n                                <% }) %>\n                            <% } %>   \n                        </div>\n                    <% }) %>\n                <% } %>  \n                    <div class="comment-card-resource"></div>\n                    <% if(data.remarkTime || data.remarkChannelName) { %>\n                        <div class="comment-card-datetime">\n                            <% if(data.remarkTime && !isResource) { %>\n                                <%= data.remarkTime%>\n                            <% } %>\n                            <% if(data.remarkChannelName && data.remarkChannelName == \'途牛电脑版\') { %>\n                                来自途牛电脑版 \n                            <% } else if (data.remarkChannelName){ %>\n                                <a href="http://www.tuniu.com/static/mobile/" target="_blank">来自<%= data.remarkChannelName%></a></div>\n                            <% } %>\n                        </div>\n                    <% } %>\n                <% if(data.replyContents && data.replyContents.length !== 0) { %>\n                    <% data.replyContents.forEach(function(replyContent,index){ %>\n                        <div class="comment-card-reply-<%= replyContent.type == 2 ? \'user\' : \'customer\' %>">\n                            <% if (replyContent.type != 2) { %>\n                            <i class="icon-customer"></i>\n                            <% } %>\n                            <% if(replyContent.replyTime) { %>\n                                <h3><%= replyContent.replyTime%> <%= replyContent.typeName %> ：</h3>\n                            <% } %>\n                            <% if(replyContent.content) { %>\n                                <p>\n                                <%= replyContent.content %>\n                                </p>\n                            <% } %>\n                            </div>\n                    <% }) %>\n                <% } %>   \n            </div>  \n    <% } %>\n<% } %>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};t['default']=function(){return new u};var o=s(n(0)),a=s(n(25));function s(e){return e&&e.__esModule?e:{default:e}}n(26);var c=window.$,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["default"]),i(t,[{key:"init",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.$el.addClass("comment-pagination"),this.bind()}},{key:"load",value:function(e){this.current=e.current||1,this.total=e.total||1,this.offset=2,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e)}},{key:"bind",value:function(){var e=this;this.$el.on("click",".pagination-prev",function(){e.change(e.current-1)}).on("click",".pagination-next",function(){e.change(e.current+1)}).on("click",".pagination-page",function(){e.change(c(this).data("page"))}).on("click",".pagination-button",function(){e.goPage()}).on("keyup",".J_paginationInput",function(t){13===t.keyCode&&e.goPage()})}},{key:"goPage",value:function(){var e=this.$(".J_paginationInput"),t=parseInt(e.val()||0,10);t&&t>0&&t<=this.total&&t!==this.current?this.change(t):e.val("").addClass("error").focus()}},{key:"change",value:function(e){(e=parseInt(e))&&this.current!==e&&e>0&&e<=this.total&&(this.current=e,this.render(),this.dispatch("change",e))}},{key:"params",value:function(){var e=this.current,t=this.total,n=this.offset,i=Math.max(e-n,1),r=Math.min(t,i+2*n);return{current:e,total:t,min:i=Math.max(r-2*n,1),max:r,more:r<t,last:r!==t}}},{key:"render",value:function(){var e=this._PaginationRender()(this.params());this.$el.html(e)}},{key:"_PaginationRender",value:function(){return this.ejs.compile(a['default'])}}]),t}()},function(e,t){e.exports='<div class="pagination">\n    <div class="pagination-box">\n        <span class="pagination-item pagination-prev<%= current === 1 ? \' disabled\' : \'\' %>">&lt;</span>\n        <% if (min != 1) { %>\n            <span class="pagination-item pagination-page" data-page="1"> 1 </span>\n        <% } %>\n        <% if (min > 2) { %>\n            <span class="pagination-item pagination-more">•••</span>\n        <% } %>\n        <% for (var page = min; page <= max; page++) { %>\n            <span class="pagination-item pagination-page<%= current === page ? \' active\' : \'\' %>"\n                <% if (current !== page) { %>data-page="<%= page %>"<% } %>><%= page %></span>\n        <% } %>\n        <% if (more) { %>\n            <span class="pagination-item pagination-more">•••</span>\n        <% } %>\n        <% if (last) { %>\n            <span class="pagination-item pagination-page" data-page="<%= total %>"><%= total %></span>\n        <% } %>\n        <span class="pagination-item pagination-next<%= current === total ? \' disabled\' : \'\' %>">&gt;</span>\n        <div class="pagination-item pagination-input">到第<input type="text" class="J_paginationInput">页</div>\n        <a href="javascript:;" class="pagination-item pagination-button">确定</a>\n    </div>\n</div>'},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};t['default']=function(){return new u},n(28);var o=c(n(29)),a=c(n(0)),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),i(t,[{key:"init",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.$el.addClass("comment-summary")}},{key:"render",value:function(){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isRendered",this).call(this)){var e=this.ejs.compile(o['default'])(Object.assign({createUrl:s.URL_CREATE_COMMENT},{data:this.data}));this.$el.html(e)}}},{key:"showError",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,null)}}]),t}()},function(e,t){},function(e,t){e.exports='<% var gradeNames = \'|导游服务|行程安排|餐饮住宿|旅行交通|\' %>\n<% var converPercent = function(num, total) {\n    var percentNumber = (num / total * 100).toFixed();\n    return percentNumber < 100 ? percentNumber : 100;\n}; %>\n\n<% if (data) { %>\n    <% if(data.satisfaction) { %>\n        <div class="comment-satisfaction">\n            <div class="title">满意度</div>\n            <div class="value"><strong><%= data.satisfaction%>%</strong></div>\n            <% if(data.peopleNum) { %>\n                <div class="count">来自<%= data.totalNum%>名游客的点评</div>\n            <% } %>\n        </div>\n        <i class="separator"></i>\n    <% } %>\n    <%  var lv1 =data.selectedTypeList.filter(function(item) { return item.selectedType == 20; })[0];\n        var lv2 =data.selectedTypeList.filter(function(item) { return item.selectedType == 21; })[0];\n        var lv3 =data.selectedTypeList.filter(function(item) { return item.selectedType == 22; })[0]; %>\n    <div class="percent">\n        <div class="row">\n            <div class="label">满意(<%= lv1.selectedAmount %>)</div>\n            <div class="chart"><i style="width: <%= converPercent(lv1.selectedAmount, data.count) %>%"></i></div>\n            <div class="value"><%= converPercent(lv1.selectedAmount, data.count) %>%</div>\n        </div>\n        <div class="row">\n            <div class="label">一般(<%= lv2.selectedAmount %>)</div>\n            <div class="chart"><i style="width: <%= converPercent(lv2.selectedAmount, data.count) %>%"></i></div>\n            <div class="value"><%= converPercent(lv2.selectedAmount, data.count) %>%</div>\n        </div>\n        <div class="row">\n            <div class="label">不满意(<%= lv3.selectedAmount %>)</div>\n            <div class="chart"><i style="width: <%= converPercent(lv3.selectedAmount, data.count) %>%"></i></div>\n            <div class="value"><%= converPercent(lv3.selectedAmount, data.count) %>%</div>\n        </div>\n    </div>\n    <div class="fraction">\n        <% if (data.specSatisfactionList && data.specSatisfactionList.length) { %>\n            <% data.specSatisfactionList.forEach(function(item) { %>\n                <% if (item.specName && item.satisfactionScore) {%>\n                    <div class="item">\n                        <%= item.specName %><span><strong><%= item.satisfactionScore %></strong>/5</span>\n                    </div>\n                <% } %>\n            <% }) %>\n        <% } %>\n    </div>\n\n    <i class="separator"></i>\n\n    <div class="post">\n        <% if (data.money || data.money === 0) { %>\n            <div class="desc">\n                出游归来发点评返现金,<br>本产品已累计发放<strong><%= data.money %></strong>元\n            </div>\n        <% } %>\n        <a class="button" href="<%= createUrl %>" target="_blank" mm="点击_详情区_游客点评_发表点评">发表点评</a>\n    </div>\n\n<% } else { %>\n\n        <div class="empty">\n\n            <div class="empty-content">\n                本产品暂无点评，赶紧购买出游归来发表点评<br>\n                点评有惊喜，海量抵用券返现等你来拿\n            </div>\n\n            <div class="post">\n                <div class="post-desc">\n                    出游回来可点评产品\n                </div>\n                <div class="post-button">\n                    <a href="<%= createUrl %>" target="_blank" mm="点击_详情区_游客点评_发表点评">发表点评</a>\n                </div>\n            </div>\n        </div>\n    </div>\n<% } %>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t['default']=function(){return new o},n(31);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),i(t,[{key:"init",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.$el.addClass("comment-content-error")}},{key:"setText",value:function(e,t){this.$el.text(e||"暂无点评信息，游客出游归来可发表点评，您的出游评价是我们提升服务的依据。"),t&&this.$el.addClass("comment-content-error-left")}}]),t}()},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t['default']=function(){try{var e=document.createElement("div");return e.style.display="flex","flex"===e.style.display}catch(e){return!1}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t['default']=function(e,t){e&&"object"===(void 0===e?"undefined":i(e))||(e={}),e.stamp=(Math.random()+""+Date.now()).replace(/\./g,"");var n=Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&null!==e[n]&&t.push(n+"="+e[n]),t},[]).join("&");return t?t+(-1===t.indexOf("?")?"?":"&")+n:n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t['default']=function(){return Date.now()+""+Math.random}}]);